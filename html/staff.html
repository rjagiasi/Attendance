<!DOCTYPE html>
<html>
	<head>
		
		<title>VESIT : Staff</title>
		<link rel="stylesheet" href="../css/bootstrap.min.css"/>
		<link rel="stylesheet" type="text/css" href="../css/global.css">
		<script src="../js/jquery.min.js"></script>
		<script src="../js/bootstrap.min.js"></script>
		<script src="../js/jquery.validate.min.js"></script>
		
		<script>
		
		$(document).ready(function () {
			
			//set classes dropdown
			
			$("[name=dept]").change(function () {
				
				var listValue = this.value;
				var classes = "";
				
				if(listValue == "it")
					classes = "<option value=\"\">Select Class</option><option value=\"d10\">D10</option><option value=\"d15\">D15</option>";
				
				else if(listValue == "comps")
					classes = "<option value=\"\">Select Class</option><option value=\"d7a\">D7A</option><option value=\"d7b\">D7B</option>";
				
				else
					return;
				
				$(this).next("[name=classes]").html(classes);
			});
			
			$("[name=classes]").change(function () {
				
				var listValue = this.value;
				var subjects = "";
				
				if(listValue == "d10")
					subjects = "<option value=\"\">Select Subject</option><option value=\"at\">AT</option><option value=\"wp\">WP</option><option value=\"cn\">CN</option>";
				else
					subjects = "<option value=\"\">Select Subject</option><option value=\"\">"+ listValue +" subjects</option>";
				
				$(this).next("[name=subject]").html(subjects);
			});
			
			
			// $("[name=classes]").trigger("change");
			
			$("#attendance_button").click(function() {
				$("#add_attendance").validate({
					rules:
					{
						date:
						{Validatedate : true},
						
						roll_nos:
						{Confirm_roll : true},
					},
					submitHandler: function() {
						alert("Success!");
					},
					onfocusout: false,
					onkeyup: false,
					onclick: false,
					
				});
			});
			
			
			$.validator.addMethod("Validatedate", function(value, element) {
				return /^(((0[1-9]|[12]\d|3[01])\/(0[13578]|1[02])\/((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)\/(0[13456789]|1[012])\/((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])\/02\/((19|[2-9]\d)\d{2}))|(29\/02\/((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$/.test(value);
			}, "Format of date dd/mm/yyyy");
			
			$.validator.addMethod("Confirm_roll", function(value, element){
				var bool;
				
				if($("#status").val() == "p" && value == "")
					bool = confirm("All Absent?");
				else if($("#status").val() == "a" && value == "")
					bool = confirm("All Present?");
				else
					bool = true;
				
				return bool;
				
			}, "Add Some Roll Nos");

			$("#register_form").validate({
				// Specify the validation rules
				rules: {
					name: {
						checkName: true
					},
					gender: "required",
					username: {
						required: true,
						minlength: 5,
					},
					pass: {
						required: true,
						minlength: 5,
					},
					phno: {
						required:true,
						minlength: 10,
						maxlength: 10
					},
					cnfpass: {
						equalTo: "#pass",
					},
					
				},
				
				// Specify the validation error messages
				messages: {
					gender: "Please select gender",
					pass: {
						required: "Please provide a password",
						minlength: "Your password must be at least 5 characters long"
					},
					username: {
						required: "Please enter a username",
						minlength: "Username should atleast be 5 characters long"
					},
					phno: {
						required: "Please enter your phone number",
						minlength: "Enter a 10 digit mobile number",
						maxlength: "Enter a 10 digit mobile number"
					},
					cnfpass: {
						equalTo: "Password and Confirmation doesn't match"
					}
					
				},
			});
		
			$.validator.addMethod("checkName",
				function(value, element) {
					if(value == "")
						return false;
					else
						return !/[\d]/.test(value);
				}
				, "Invalid Name");
			
			$("[name=dept]").trigger("change");
			$("#greet").html("Welcome username");
			$("#staff").collapse("show");
			$("#content > div").hide();
			

			$("#staff").find("a").click(function(event) {
				$(".active").toggleClass("active", false);
				var id = $(event.target).parent().attr("id");
				$("#"+id).addClass("active");

				$("#content > div").hide();
				$("#"+id+"_form_div").show();
			});

			$("#enggbranches").find("a").click(function(event) {
				var classid = $(event.target).parent().attr("id");
				var branchid = $(event.target).parent().parent().attr("id");
				
				var url="student.php?branch="+branchid+"&class="+classid;
				$(location).attr("href", url); 
			});
			
		});
		
		</script>
		
		
		<div>
			<img id="logo" src="../imgs/logo.png" alt = "Ves Logo" >
			<h2 id="heading">VESIT Attendance Portal</h2>
			<br/><hr/>
			<p id="greet"/>
			</div>
			
		</head>
		<body>
			<hr/>
			<div id="menu">
				<ul class="nav nav-pills nav-stacked">
					<li><a class="menuheads" href="index.html">Home</a></li>
					<li><a class="menuheads">MCA</a></li>
					<li><a class="menuheads">Diploma</a></li>
					<li><a data-toggle="collapse" data-target="#enggbranches" class="menuheads collapsed" aria-expanded="false">Engineering</a></li>
					<div class="sectionbranches collapse" id="enggbranches" aria-expanded="false" style="height:0px;">
						<li data-toggle="collapse" data-target="#it" class="menuheads" id="itheader" aria-expanded="true">IT</li>
						<ul id="it" class="nav nav-pills nav-stacked collapse in" aria-expanded="true">
							<li id="d10"><a>D10</a></li>
							<li id="d15"><a>D15</a></li>
						</ul>
						<li data-toggle="collapse" data-target="#comps" class="menuheads" id="compsheader" aria-expanded="true">Comps</li>
						<ul id="comps" class="nav nav-pills nav-stacked collapse in" aria-expanded="true">
							<li id="d7a"><a>D7A</a></li>
							<li id="d7b"><a>D7B</a></li>
						</ul>
					</div>
					
					<li><a data-toggle="collapse" data-target="#staff" class="menuheads collapsed" aria-expanded="false">Staff</a></li>
					<div class="sectionbranches collapse" id="staff" aria-expanded="false" style="height:0px;">
						<ul id="staff" class="nav nav-pills nav-stacked collapse in" aria-expanded="true">
							<li id="register"><a>Register</a></li>
							<li id="report"><a>Report</a></li>
							<li id="attendance"><a>Add Attendance</a></li>
						</ul>
					</div>
					
				</ul>
				
			</div>
			
			
			<div id="content">
				<br/>
				<div id = "report_form_div">
					<label for="gen_report">For Generating Attendance Status for a particular subject</label>
					<form class="form-inline" id="gen_report" name="gen_report" action="nextpage.htm">
						<select class="form-control" name="dept" required>
							<option value="">Select Dept</option>
							<option value="it">IT</option>
							<option value="comps">COMPS</option>
						</select>
						<select class="form-control" name="classes" required>
							<option value="">Select Class</option>
						</select>
						<select class="form-control" name="subject" required>
							<option value="">Select Subject</option>
						</select>
						<button class="btn btn-primary">Generate Report</button>
					</form>
				</div>
				
				<div id="attendance_form_div">
					<label for="add_attendance">Add attendance</label>
					<form class="form-inline" id="add_attendance" name="add_attendance" action="nextpage.htm">
						<select class="form-control" name="dept" required>
							<option value="">Select Dept</option>
							<option value="it">IT</option>
							<option value="comps">COMPS</option>
						</select>
						<select class="form-control" name="classes" required>
							<option value="">Select Class</option>
						</select>
						<select class="form-control" name="subject" required>
							<option value="">Select Subject</option>
						</select>
						<select class="form-control" id="status" name="status" required>
							<option value="p">Enter Presentees</option>
							<option value="a">Enter Absentees</option>
						</select><br/><br/>
						<input type="text" class="form-control" id="roll_nos" name="roll_nos" placeholder="Enter Roll Numbers"/>
						<input type="text" class="form-control" id="date" name="date" placeholder="dd/mm/yyyy" required/>
						<button class="btn btn-primary" id="attendance_button" type="submit">Add Attendance</button>
						
					</form>
				</div>
				
				<div id="register_form_div">
					<label>Register a New Staff Member</label>
					<form id="register_form" class="form-horizontal" action="" method="POST">
						
						<input name="name" type="text" class="form-control" placeholder="Enter name" autofocus/><br/>
						<label>Select Gender</label></br>
						<input type="radio" name="gender" value="male"> Male </input><br/>
						<input type="radio" name="gender" value="female"> Female </input><br/><br/>
						<input name="phno" type="tel" class="form-control" placeholder="Enter Phone no."/><br/>
						<input name="username" type="text" class="form-control" placeholder="Enter Username"/><br/>
						<input name="pass" id="pass" type="password" class="form-control" placeholder="Enter Password"/><br/>
						<input name="cnfpass" type="password" class="form-control" placeholder="Confirm Password"/><br/>
						<button type="submit" class="btn btn-default">Submit</button>
						
					</form>
				</div>
			</div>
			<br/>
			<div id="footer">
				Copyright &copy; vesit.edu
			</div>
		</body>
		
	</html>